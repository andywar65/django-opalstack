{% load i18n %}

<h1>{% trans "(((Opalstack Token" %}: <i>{{ object.name }}</i></h1>
<ul>
  <li>
    <a href="/admin/django_opalstack/token/{{ object.id }}/change/">
      {% trans "Modify Token" %}
    </a>
  </li>
  <li>
    <a href="#"
       hx-get="{% url 'django_opalstack:token_list' %}"
       hx-target="#opal-content"
       hx-push-url="true">
      {% trans "Back to token list" %}
    </a>
  </li>
</ul>
<p id="opal-indicator" class="htmx-indicator" style="color: red">{% trans "Loading..." %}</p>
<table style="width: 100%">
  <tr>
    <th style="width: 33%">
      {% trans "Web servers" %}
    </th>
    <th>
    </th>
  </tr>
  {% if web_servers %}
    {% for server in web_servers %}
      <tr>
        <td>
          <details>
            <summary>{{ server.hostname }}</summary>
            <ul>
              <li>{% trans "ID" %}: {{ server.id }}</li>
              <li>{% trans "Type" %}: {{ server.type }}</li>
              <li>{% trans "OS" %}: {{ server.os }}</li>
              <li>{% trans "Vendor" %}: {{ server.vendor }}</li>
            </ul>
          </details>
        </td>
        <td>
          <a
            href="#"
            hx-get="{% url 'django_opalstack:user_list' pk=object.id %}?server_id={{ server.id }}"
            hx-swap="outerHTML"
            hx-indicator="#opal-indicator">
            {% trans "Get OS users" %}
          </a>
        </td>
      </tr>
    {% endfor %}
  {% else %}
    <tr>
      <td>
        {% trans "No web servers yet" %}
      </td>
      <td>
      </td>
    </tr>
  {% endif %}
</table>
